{"version":3,"sources":["../../../../src/modules/auth/strategys/google-oauth.strategy.ts"],"sourcesContent":["import { Injectable } from '@nestjs/common'\nimport { PassportStrategy } from '@nestjs/passport'\nimport { Strategy } from 'passport-google-oauth20'\nimport { AuthStrategyEnum } from '../../../utils/auth.enum'\n\n@Injectable()\nexport class GoogleGuardStrategy extends PassportStrategy(\n\tStrategy,\n\tAuthStrategyEnum.googleOAuth\n) {\n\tconstructor() {\n\t\tsuper({\n\t\t\tclientID: process.env.GOOGLE_CLIENT_ID,\n\t\t\tclientSecret: process.env.GOOGLE_SECRET_KEY,\n\t\t\tcallbackURL: process.env.GOOGLE_CALLBACK_URL,\n\t\t\tscope: ['profile', 'email'],\n\t\t})\n\t}\n\n\tasync validate(_accessToken, _refreshToken, profile, callback) {\n\t\tconst { name, emails, photos } = profile\n\n\t\tconst user = {\n\t\t\temail: emails[0].value,\n\t\t\tname: `${name.givenName} ${name.familyName}`,\n\t\t\tpicture: photos[0].value,\n\t\t}\n\n\t\tcallback(null, user)\n\t}\n}\n"],"names":["GoogleGuardStrategy","PassportStrategy","Strategy","AuthStrategyEnum","googleOAuth","validate","_accessToken","_refreshToken","profile","callback","name","emails","photos","user","email","value","givenName","familyName","picture","constructor","clientID","process","env","GOOGLE_CLIENT_ID","clientSecret","GOOGLE_SECRET_KEY","callbackURL","GOOGLE_CALLBACK_URL","scope","Injectable"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAMaA;;;eAAAA;;;wBANc;0BACM;uCACR;0BACQ;;;;;;;;;;AAG1B,IAAA,AAAMA,sBAAN,MAAMA,4BAA4BC,IAAAA,0BAAgB,EACxDC,+BAAQ,EACRC,0BAAgB,CAACC,WAAW;IAW5B,MAAMC,SAASC,YAAY,EAAEC,aAAa,EAAEC,OAAO,EAAEC,QAAQ,EAAE;QAC9D,MAAM,EAAEC,IAAI,EAAEC,MAAM,EAAEC,MAAM,EAAE,GAAGJ;QAEjC,MAAMK,OAAO;YACZC,OAAOH,MAAM,CAAC,EAAE,CAACI,KAAK;YACtBL,MAAM,CAAC,EAAEA,KAAKM,SAAS,CAAC,CAAC,EAAEN,KAAKO,UAAU,CAAC,CAAC;YAC5CC,SAASN,MAAM,CAAC,EAAE,CAACG,KAAK;QACzB;QAEAN,SAAS,MAAMI;IAChB;IAnBAM,aAAc;QACb,KAAK,CAAC;YACLC,UAAUC,QAAQC,GAAG,CAACC,gBAAgB;YACtCC,cAAcH,QAAQC,GAAG,CAACG,iBAAiB;YAC3CC,aAAaL,QAAQC,GAAG,CAACK,mBAAmB;YAC5CC,OAAO;gBAAC;gBAAW;aAAQ;QAC5B;IACD;AAaD;AAxBa5B;IADZ6B,IAAAA,kBAAU;;;GACE7B"}